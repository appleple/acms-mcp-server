{
  "name": "V2_Calendar",
  "description": "カレンダー形式でエントリーを表示するモジュール（V2版）です。Twigテンプレート形式で、指定した条件に一致するエントリーをカレンダー形式で取得・表示できます。月次カレンダーを表示し、各日にエントリーがある場合はリンクを表示します。前月・次月へのナビゲーションも提供します。",
  "snippet": "{% set calendar = module('V2_Calendar', null, { bid: null, cid: null, start: null }) %}\n\n<div>\n  {{ include('/admin/module/setting.twig', { moduleInfo: calendar.moduleInfo }) }}\n\n  {% macro renderEntries(entries) %}\n    {% for entry in entries %}\n      <div>\n        {% if entry.url %}\n          <a href=\"{{ entry.url }}\">{{ entry.title }}</a>\n        {% else %}\n          {{ entry.title }}\n        {% endif %}\n      </div>\n    {% endfor %}\n  {% endmacro %}\n\n  <div>\n    {% if calendar.date %}\n    <div>\n      <h3 class=\"acms-text-center\"><a href=\"{{ BASE_URL }}calendar.html/{{ calendar.date.year }}/{{ calendar.date.month }}\">{{ calendar.date.month }}月</a></h3>\n      <ul class=\"acms-text-center acms-list-inline\">\n        <li><a href=\"{{ BASE_URL }}calendar.html/{{ calendar.date.prevDate }}\" class=\"acms-btn-flat\" title=\"前月へ\">«</a></li>\n        <li>{{ calendar.date.year }}/{{ calendar.date.month }}</li>\n        <li><a href=\"{{ BASE_URL }}calendar.html/{{ calendar.date.nextDate }}\" class=\"acms-btn-flat\" title=\"次月へ\">»</a></li>\n      </ul>\n    </div>\n    {% endif %}\n    <table class=\"acms-table acms-table-bordered\">\n    <thead>\n      <tr class=\"acms-text-center\">\n        {% for week in calendar.weekLabels %}\n        <td >{{ week.label }}</td>\n        {% endfor %}\n      </tr>\n    </thead>\n    <tbody>\n      {% for week in calendar.weeks %}\n      <tr class=\"acms-text-center\">\n        {% for day in week %}\n        <td>\n          {% if day.entries %}\n          <a href=\"{{ day.url }}\">{{ day.day }}</a>\n          {# {{ _self.renderEntries(day.entries) }} #}\n          {% else %}\n          {{ day.day }}\n          {% endif %}\n        </td>\n        {% endfor %}\n      </tr>\n      {% endfor %}\n    </tbody>\n    </table>\n  </div>\n</div>",
  "parameters": {
    "bid": {
      "description": "ブログID（nullの場合は現在のブログ）",
      "example": "bid: 1",
      "type": "integer|null"
    },
    "cid": {
      "description": "カテゴリーIDで絞り込み",
      "example": "cid: 10",
      "type": "integer|null"
    },
    "start": {
      "description": "開始日（YYYY-MM-DD形式、nullの場合は現在の月）",
      "example": "start: '2024-01-01'",
      "type": "string|null"
    }
  },
  "variables": {
    "calendar.moduleInfo": "モジュール情報（設定画面用）",
    "calendar.date": "カレンダーの日付情報",
    "calendar.date.year": "年",
    "calendar.date.month": "月",
    "calendar.date.prevDate": "前月の日付（YYYY-MM形式）",
    "calendar.date.nextDate": "次月の日付（YYYY-MM形式）",
    "calendar.weekLabels": "週のラベル（日、月、火など）の配列",
    "calendar.weekLabels[].label": "週のラベル（日、月、火など）",
    "calendar.weeks": "週の配列（カレンダーの各行）",
    "week": "週の配列（日付の配列）",
    "day.day": "日付（日）",
    "day.url": "その日のエントリー一覧のURL（エントリーがある場合）",
    "day.entries": "その日のエントリーの配列（存在する場合）",
    "entry.title": "エントリーのタイトル",
    "entry.url": "エントリーのURL"
  },
  "notes": [
    "Twigテンプレート形式で記述します",
    "module()関数の第1引数にはモジュール名（V2から始まるもの）を指定します（例: 'V2_Calendar'）。これは固定値で、モジュールIDとは異なります。cms_modulesで取得したnameフィールドの値を使用します。",
    "module()関数の第2引数にはモジュールID（identifier）を指定します（例: 'test2', 'calendar'）。acms_modulesで取得したidentifierフィールドの値を使用します。",
    "module()関数の第3引数にパラメータをオブジェクト形式で渡します",
    "重要: module('モジュール名', 'モジュールID', {パラメータ}) の順序です。モジュールIDを第1引数にしないでください。",
    "カレンダーは月次形式で表示され、各日にエントリーがある場合はリンクが表示されます",
    "calendar.date.prevDate と calendar.date.nextDate で前月・次月へのナビゲーションを実装できます",
    "day.entries が存在する場合、その日にエントリーがあります",
    "マクロ（renderEntries）を使用して、各日のエントリーを表示できます（コメントアウトされている部分を有効化）",
    "BASE_URL はa-blog cmsの定数です",
    "start パラメータが null の場合は、現在の月のカレンダーが表示されます"
  ]
}

